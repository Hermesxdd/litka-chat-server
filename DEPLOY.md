# Инструкция по деплою на Render.com (Рекомендуется)

## Шаг 1: Подготовка

1. Создайте GitHub репозиторий
2. Загрузите папку `irc-server` в репозиторий

## Шаг 2: Регистрация на Render

1. Перейдите на https://render.com
2. Нажмите "Get Started for Free"
3. Зарегистрируйтесь через GitHub

## Шаг 3: Создание Web Service

1. На дашборде нажмите "New +"
2. Выберите "Web Service"
3. Подключите ваш GitHub репозиторий
4. Выберите репозиторий с сервером

## Шаг 4: Настройка

Заполните поля:

- **Name**: `litka-chat-server` (или любое другое имя)
- **Region**: Выберите ближайший регион (Europe для России)
- **Branch**: `main` (или ваша основная ветка)
- **Root Directory**: `irc-server` (если сервер в подпапке)
- **Runtime**: `Node`
- **Build Command**: `npm install`
- **Start Command**: `npm start`
- **Plan**: Выберите **Free**

## Шаг 5: Deploy

1. Нажмите "Create Web Service"
2. Подождите 2-3 минуты пока сервер деплоится
3. После успешного деплоя вы увидите URL типа: `https://litka-chat-server.onrender.com`

## Шаг 6: Проверка

Откройте в браузере:
```
https://your-app.onrender.com/
```

Должно показать: "Litka Chat Server is running"

Проверьте статистику:
```
https://your-app.onrender.com/stats
```

## Шаг 7: Обновление клиента

В файле `src/java/client/irc/IRCClient.java` замените:

```java
private static final String SERVER_URL = "wss://your-app.onrender.com";
```

На ваш реальный URL (замените `your-app` на имя вашего сервиса):

```java
private static final String SERVER_URL = "wss://litka-chat-server.onrender.com";
```

**Важно**: Используйте `wss://` (не `ws://`) для безопасного соединения!

## Готово!

Теперь все пользователи клиента смогут общаться через ваш чат сервер.

---

# Альтернатива: Railway.app

Если Render не подходит, можно использовать Railway:

1. Зарегистрируйтесь на https://railway.app
2. New Project -> Deploy from GitHub
3. Выберите репозиторий
4. Railway автоматически определит настройки
5. После деплоя получите URL типа: `https://your-app.up.railway.app`

---

# Мониторинг

После деплоя вы можете:

1. Смотреть логи в реальном времени на Render Dashboard
2. Проверять статистику через `/stats` endpoint
3. Настроить уведомления о падении сервера

---

# Важные заметки

- **Free план Render**: Сервер засыпает после 15 минут неактивности
- **Пробуждение**: Первое подключение может занять 30-60 секунд
- **Лимиты**: 750 часов в месяц (достаточно для постоянной работы)
- **SSL**: Автоматически включен (поэтому используем `wss://`)

---

# Troubleshooting

**Проблема**: Сервер не запускается
- Проверьте логи в Render Dashboard
- Убедитесь что `package.json` и `server.js` в корне указанной директории

**Проблема**: Клиент не подключается
- Проверьте что используете `wss://` (не `ws://`)
- Проверьте что URL правильный
- Проверьте что сервер запущен (откройте URL в браузере)

**Проблема**: Сервер засыпает
- Это нормально для Free плана
- Первое подключение разбудит сервер за 30-60 секунд
- Для постоянной работы нужен платный план ($7/месяц)
