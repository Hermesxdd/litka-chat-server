# Litka Chat Server

WebSocket сервер для чата клиента Litka.

## Установка

```bash
npm install
```

## Запуск локально

```bash
npm start
```

Сервер запустится на порту 3000.

## Бесплатные хостинги для деплоя

### 1. Render.com (Рекомендуется)
- **Плюсы**: Бесплатный план, автоматический деплой из GitHub, SSL сертификат
- **Минусы**: Засыпает после 15 минут неактивности
- **Инструкция**:
  1. Зарегистрируйтесь на https://render.com
  2. Создайте новый Web Service
  3. Подключите GitHub репозиторий
  4. Build Command: `npm install`
  5. Start Command: `npm start`
  6. Выберите Free план

### 2. Railway.app
- **Плюсы**: $5 бесплатных кредитов в месяц, не засыпает
- **Минусы**: Требует карту для регистрации
- **Инструкция**:
  1. Зарегистрируйтесь на https://railway.app
  2. New Project -> Deploy from GitHub
  3. Выберите репозиторий
  4. Railway автоматически определит Node.js проект

### 3. Fly.io
- **Плюсы**: Хороший бесплатный план, быстрый
- **Минусы**: Требует карту
- **Инструкция**:
  1. Установите Fly CLI: https://fly.io/docs/hands-on/install-flyctl/
  2. `fly auth signup`
  3. `fly launch` в папке проекта
  4. `fly deploy`

### 4. Glitch.com
- **Плюсы**: Не требует карту, простой
- **Минусы**: Засыпает после 5 минут, ограничения по ресурсам
- **Инструкция**:
  1. Зарегистрируйтесь на https://glitch.com
  2. New Project -> Import from GitHub
  3. Вставьте ссылку на репозиторий

### 5. Cyclic.sh
- **Плюсы**: Бесплатный, не засыпает, простой деплой
- **Минусы**: Ограничения по трафику
- **Инструкция**:
  1. Зарегистрируйтесь на https://cyclic.sh
  2. Link Your Own -> GitHub
  3. Выберите репозиторий
  4. Deploy

## Рекомендация

**Лучший вариант: Render.com**
- Полностью бесплатный
- Автоматический SSL
- Простой деплой
- Надежный

Единственный минус - засыпает после 15 минут неактивности, но просыпается за 30 секунд при первом подключении.

## После деплоя

После деплоя вы получите URL типа:
- Render: `https://your-app.onrender.com`
- Railway: `https://your-app.up.railway.app`
- Fly.io: `https://your-app.fly.dev`

Используйте этот URL в клиенте (замените `ws://` на `wss://` для безопасного соединения).

## Проверка работы

После деплоя откройте в браузере:
- `https://your-url.com/` - должно показать "Litka Chat Server is running"
- `https://your-url.com/stats` - покажет статистику (онлайн пользователей и сообщений)

## Переменные окружения

- `PORT` - порт сервера (автоматически устанавливается хостингом)

## Протокол

### Подключение
```json
{
  "type": "join",
  "username": "Player123"
}
```

### Отправка сообщения
```json
{
  "type": "message",
  "message": "Привет всем!"
}
```

### Получение сообщения
```json
{
  "type": "message",
  "username": "Player123",
  "message": "Привет всем!",
  "timestamp": 1234567890
}
```

### Системное сообщение
```json
{
  "type": "system",
  "message": "Player123 присоединился к чату",
  "timestamp": 1234567890
}
```

### Онлайн счетчик
```json
{
  "type": "online",
  "count": 5
}
```
